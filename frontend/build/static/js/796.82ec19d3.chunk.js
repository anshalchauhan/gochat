"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[796],{4596:function(e,n,t){var r=t(5987),i=t(1413),o=t(2791),s=t(2232),a=t(788),c=t(464),l=t(8440),u=t(9571),d=t(184),h=["open","onClose","dialogText","dialogContentText","dialogForm"],p=o.forwardRef((function(e,n){return(0,d.jsx)(s.Z,(0,i.Z)({direction:"up",ref:n},e))}));n.Z=function(e){var n=e.open,t=e.onClose,o=e.dialogText,s=e.dialogContentText,x=e.dialogForm,m=(0,r.Z)(e,h);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(a.Z,(0,i.Z)((0,i.Z)({open:n,TransitionComponent:p,keepMounted:!0,onClose:t,"aria-describedby":"alert-dialog-slide-description"},m),{},{children:[o&&(0,d.jsx)(c.Z,{sx:{mb:3},children:o}),(0,d.jsxs)(l.Z,{children:[s&&(0,d.jsx)(u.Z,{id:"alert-dialog-slide-description",children:s}),x]})]}))})}},7909:function(e,n,t){var r=t(6015),i=t(4162),o=t(184);n.Z=function(e){var n=e.children,t=e.padding,s=e.spacing;return(0,o.jsx)(r.Z,{sx:{position:"relative",height:"100vh",width:320,backgroundColor:function(e){return"light"===e.palette.mode?"#F8FAFF":e.palette.background.paper},boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,o.jsx)(i.Z,{p:t,spacing:s,direction:"column",height:"100%",children:n})})}},8659:function(e,n,t){var r=t(6015),i=(0,t(277).ZP)(r.Z)((function(){return{"&.scrollbar::-webkit-scrollbar":{width:10,backgroundColor:"transparent"},"&.scrollbar::-webkit-scrollbar-thumb":{borderRadius:20,backgroundColor:"transparent"},"&.scrollbar:hover::-webkit-scrollbar-thumb":{borderRadius:20,background:"#6c6b6b"}}}));n.Z=i},5670:function(e,n,t){var r=t(277),i=t(294),o=(0,r.ZP)(i.Z)((function(e){var n=e.theme;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(n.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"rippleBadge 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes rippleBadge":{"0%":{transform:"scale(0.8)",opacity:1},"100%":{transform:"scale(2)",opacity:0}}}}));n.Z=o},3309:function(e,n,t){t.d(n,{Fl:function(){return p},Iy:function(){return g},au:function(){return u},ZP:function(){return s}});var r=t(1413),i=t(1134),o=t(184);function s(e){var n=e.children,t=e.onSubmit,s=e.methods;return(0,o.jsx)(i.RV,(0,r.Z)((0,r.Z)({},s),{},{children:(0,o.jsx)("form",{onSubmit:t,children:n})}))}var a=t(5987),c=t(5533),l=["name","helperText"];function u(e){var n=e.name,t=e.helperText,s=(0,a.Z)(e,l),u=(0,i.Gc)().control;return(0,o.jsx)(i.Qr,{name:n,control:u,render:function(e){var n=e.field,i=e.fieldState.error;return(0,o.jsx)(c.Z,(0,r.Z)((0,r.Z)({},n),{},{fullWidth:!0,value:"number"===typeof n.value&&0===n.value?"":n.value,error:!!i,helperText:i?null===i||void 0===i?void 0:i.message:t},s))}})}var d=t(2262),h=["name","label","helperText"];function p(e){var n=e.name,t=e.label,s=e.helperText,l=(0,a.Z)(e,h),u=(0,i.Gc)(),p=u.control,x=u.setValue,m=function(e,t){x(n,t,{shouldValidate:!0})};return(0,o.jsx)(i.Qr,{name:n,control:p,render:function(e){var n=e.field,i=e.fieldState.error;return(0,o.jsx)(d.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},n),{},{fullWidth:!0,value:"number"===typeof n.value&&0===n.value?"":n.value,onChange:m},l),{},{renderInput:function(e){return(0,o.jsx)(c.Z,(0,r.Z)({label:t,error:!!i,helperText:i?null===i||void 0===i?void 0:i.message:s},e))}}))}})}var x=t(4162),m=t(2791),f=["keyName","inputs"],g=function(e){var n=e.keyName,t=void 0===n?"":n,s=e.inputs,l=void 0===s?[]:s,u=(0,a.Z)(e,f),d=(0,m.useRef)(null),h=(0,i.Gc)().control;return(0,o.jsx)(x.Z,{direction:"row",spacing:2,justifyContent:"center",ref:d,children:l.map((function(e,n){return(0,o.jsx)(i.Qr,{name:"".concat(t).concat(n+1),control:h,render:function(e){var i=e.field,s=e.fieldState.error;return(0,o.jsx)(c.Z,(0,r.Z)((0,r.Z)({},i),{},{error:!!s,autoFocus:0===n,placeholder:"-",onChange:function(e){!function(e,n){var r=e.target,i=r.maxLength,o=r.value,s=r.name,a=Number(s.replace(t,"")),c=document.querySelector("input[name=".concat(t).concat(a+1,"]"));o.length>i&&(e.target.value=o[0]),o.length>=i&&a<6&&null!==c&&c.focus(),n(e)}(e,i.onChange)},onFocus:function(e){return e.currentTarget.select()},InputProps:{sx:{width:{xs:36,sm:56},height:{xs:36,sm:56},"& input":{p:0,textAlign:"center"}}},inputProps:{maxLength:1,type:"number"}},u))}},e)}))})}},8872:function(e,n,t){t.d(n,{Z:function(){return D}});var r=t(885),i=t(2791),o=t(4162),s=t(4565),a=t(3811),c=t(1872),l=t(662),u=t(9593),d=t(277),h=t(2065),p=t(1169),x=t(703),m=t(184),f=(0,d.ZP)("div")((function(e){var n=e.theme;return{position:"relative",borderRadius:20,backgroundColor:(0,h.Fq)(n.palette.background.default,1),marginRight:n.spacing(2),marginLeft:0,width:"100%"}})),g=(0,d.ZP)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),j=(0,d.ZP)(p.ZP)((function(e){var n=e.theme;return{color:"inherit","& .MuiInputBase-input":{padding:n.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(n.spacing(4),")"),width:"100%"}}})),Z=function(){return(0,m.jsxs)(f,{children:[(0,m.jsx)(g,{children:(0,m.jsx)(x.Z,{color:"#709CE6"})}),(0,m.jsx)(j,{placeholder:"Search...",inputProps:{"aria-label":"search"}})]})},v=t(8659),b=t(788),k=t(4293),y=t(166),C=t(8440),w=t(9434),I=t(2140),W=t(1413),F=t(6015),S=t(3978),E=t(7205),L=t(5670),q=t(1498),_=t(3687),T=window.localStorage.getItem("userId"),R=(0,d.ZP)(F.Z)((function(e){e.theme;return{"&:hover":{cursor:"pointer"}}})),P=function(e){var n=e.type,t=e.id,r=e._id,i=e.firstName,c=e.lastName,l=e.avatar,u=(e.incoming,e.missed,e.online),d="".concat(i," ").concat(c);return(0,m.jsx)(R,{sx:{width:"100%",borderRadius:1,backgroundColor:function(e){return e.palette.background.paper}},p:2,children:(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[" ",u?(0,m.jsx)(L.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.Z,{alt:d,src:l})}):(0,m.jsx)(S.Z,{alt:d,src:l}),(0,m.jsx)(o.Z,{spacing:.3,children:(0,m.jsx)(s.Z,{variant:"subtitle2",children:d})})]}),(0,m.jsx)(o.Z,{direction:"row",spacing:2,alignItems:"center",children:function(){switch(n){case"friend_request":return(0,m.jsx)(E.Z,{onClick:function(){return null===q.W||void 0===q.W?void 0:q.W.emit("friend_request",{to:r,from:T},(function(){return alert("request sent")}))},children:"Send Request"});case"start_conversation":return(0,m.jsx)(a.Z,{onClick:function(){return null===q.W||void 0===q.W?void 0:q.W.emit("start_conversation",{to:r,from:T})},children:(0,m.jsx)(_.Z,{})});case"accept_request":return(0,m.jsx)(E.Z,{onClick:function(){return null===q.W||void 0===q.W?void 0:q.W.emit("accept_request",{requestId:t},(function(){return alert("request accepted")}))},children:"Accept Request"})}}()})]})})},N=function(e){var n=e.thunk,t=e.list,r=e.type,o=(0,w.I0)();return(0,i.useEffect)((function(){o(n())}),[o,n]),(0,m.jsx)(m.Fragment,{children:t.map((function(e){return(0,m.jsx)(P,(0,W.Z)((0,W.Z)({type:r,id:e._id},e.sender),e),e._id)}))})},M=function(e){var n=e.open,t=e.handleClose,s=(0,i.useState)(0),a=(0,r.Z)(s,2),c=a[0],l=a[1],u=(0,w.v9)((function(e){return e.user})),d=u.users,h=u.friends,p=u.friendRequests;return(0,m.jsxs)(b.Z,{fullWidth:!0,maxWidth:"xs",open:n,keepMounted:!0,onClose:t,sx:{p:4},children:[(0,m.jsx)(o.Z,{p:2,sx:{width:"100%"},children:(0,m.jsxs)(k.Z,{value:c,onChange:function(e,n){l(n)},centered:!0,children:[(0,m.jsx)(y.Z,{label:"Explorer"}),(0,m.jsx)(y.Z,{label:"Friends"}),(0,m.jsx)(y.Z,{label:"Requests"})]})}),(0,m.jsx)(C.Z,{children:(0,m.jsx)(o.Z,{sx:{height:"100%"},children:(0,m.jsx)(o.Z,{spacing:2.5,children:function(){switch(c){case 0:return(0,m.jsx)(N,{thunk:I.uh,list:d,type:"friend_request"});case 1:return(0,m.jsx)(N,{thunk:I.nm,list:h,type:"start_conversation"});case 2:return(0,m.jsx)(N,{thunk:I.Sv,list:p,type:"accept_request"})}}()})})})]})},G=t(7909),V=function(e){var n=e.onClick,t=e.children,r=e.isSelected,i={width:"100%",height:60,borderRadius:1,backgroundColor:function(e){return r?"light"===e.palette.mode?(0,h.Fq)(e.palette.primary.main,.5):e.palette.primary.main:"light"===e.palette.mode?"#fff":(0,h.Fq)(e.palette.background.default,1)}};return(0,m.jsx)(F.Z,{p:1,sx:i,onClick:n,children:t})},z=function(e){var n=e.id,t=e.userId,r=e.img,i=e.name,a=e.msg,c=e.lastMessage,l=e.time,u=e.unread,d=e.online,h=(0,w.I0)(),p=(0,w.v9)((function(e){return e.user})).roomId,x=null===p||void 0===p?void 0:p.toString(),f=x===n.toString();return x||(f=!1),(0,m.jsx)(V,{onClick:function(){h((0,I.xu)({roomId:n})),h((0,I.NI)({id:n,userId:t,img:r,name:i,msg:a,time:l,unread:u,online:d}))},isSelected:f,children:(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(o.Z,{direction:"row",spacing:2,children:[d?(0,m.jsx)(L.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.Z,{src:r})}):(0,m.jsx)(S.Z,{alt:i,src:r}),(0,m.jsxs)(o.Z,{spacing:.3,children:[(0,m.jsx)(s.Z,{variant:"subtitle2",children:i}),(0,m.jsx)(s.Z,{variant:"caption",children:(null===c||void 0===c?void 0:c.length)>24?"".concat(null===c||void 0===c?void 0:c.slice(0,24),"..."):c})]})]}),(0,m.jsx)(o.Z,{height:40,alignItems:"flex-start",spacing:2,children:(0,m.jsx)(s.Z,{sx:{fontWeight:600},variant:"caption",children:l})})]})})},A=function(e){var n=e.type,t=(0,w.I0)(),r=(0,w.v9)((function(e){return e.chat.singleChat})),a=r.conversations,c=r.currentMessages,l=(0,w.v9)((function(e){return e.user.user}))._id;return(0,i.useEffect)((function(){q.W.emit("get_single_chat_conversations",{userId:l},(function(e){console.log("chatelement",l),t((0,I.yK)({userId:l,conversations:e}))}))}),[l,t,c]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(o.Z,{spacing:2.4,children:[(0,m.jsx)(s.Z,{sx:{color:"#676767"},variant:"subtitle2",children:n}),a.filter((function(e){return!e.pinned})).map((function(e){return(0,m.jsx)(z,(0,W.Z)({},e),e.id)}))]})})},B=t(8433),O=t(1707),H=t(5510),Q=t(6628),X=t(4059),Y=function(e){var n=e.online,t=e.incoming,r=e.missed;return(0,m.jsx)(V,{children:(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:2,children:[n?(0,m.jsx)(L.Z,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.Z,{src:O.We.image.avatar()})}):(0,m.jsx)(S.Z,{alt:O.We.name.fullName(),src:O.We.image.avatar()}),(0,m.jsxs)(o.Z,{spacing:.3,children:[(0,m.jsx)(s.Z,{variant:"subtitle2",children:O.We.name.fullName()}),(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[t?(0,m.jsx)(H.Z,{color:r?"red":"green"}):(0,m.jsx)(Q.Z,{color:r?"red":"green"}),(0,m.jsx)(s.Z,{variant:"caption",children:"Yesterday 21:24"})]})]})]}),(0,m.jsx)(a.Z,{children:(0,m.jsx)(X.Z,{color:"green"})})]})})},K=function(){return(0,m.jsx)(m.Fragment,{children:B.Ig.map((function(e){return(0,m.jsx)(Y,(0,W.Z)({},e),e.id)}))})},D=function(e){var n=e.heading,t=e.type,d=e.option,h=e.elementType,p=(0,i.useState)(!1),x=(0,r.Z)(p,2),f=x[0],g=x[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(G.Z,{padding:3,spacing:2,children:[(0,m.jsxs)(o.Z,{spacing:2,children:[(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsx)(s.Z,{variant:"h5",children:n}),(0,m.jsxs)(o.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,m.jsx)(a.Z,{onClick:function(){g(!0)},children:(0,m.jsx)(l.Z,{})}),(0,m.jsx)(a.Z,{children:(0,m.jsx)(u.Z,{})})]})]}),(0,m.jsx)(o.Z,{sx:{width:"100%"},children:(0,m.jsx)(Z,{})}),(0,m.jsxs)(o.Z,{spacing:1,children:[d,(0,m.jsx)(c.Z,{})]})]}),(0,m.jsx)(v.Z,{className:"scrollbar",sx:{flexGrow:1,height:"100%",overflowY:"scroll"},children:(0,m.jsx)(o.Z,{spacing:2,direction:"column",children:function(){switch(h){case"Chat":return(0,m.jsx)(A,{type:t});case"Call":return(0,m.jsx)(K,{})}}()})})]}),f&&(0,m.jsx)(M,{open:f,handleClose:function(){g(!1)}})]})}},1796:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(885),i=t(2791),o=t(8872),s=t(4162),a=t(4565),c=t(6283),l=t(3811),u=t(4142),d=t(2602),h=t(7120),p=new Map;p.set("bold",(function(e){return i.createElement(i.Fragment,null,i.createElement("line",{x1:"40",y1:"128",x2:"216",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}),i.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"216",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"}))})),p.set("duotone",(function(e){return i.createElement(i.Fragment,null,i.createElement("line",{x1:"40",y1:"128",x2:"216",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),i.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"216",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))})),p.set("fill",(function(){return i.createElement(i.Fragment,null,i.createElement("path",{d:"M216,120H136V40a8,8,0,0,0-16,0v80H40a8,8,0,0,0,0,16h80v80a8,8,0,0,0,16,0V136h80a8,8,0,0,0,0-16Z"}))})),p.set("light",(function(e){return i.createElement(i.Fragment,null,i.createElement("line",{x1:"40",y1:"128",x2:"216",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}),i.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"216",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"12"}))})),p.set("thin",(function(e){return i.createElement(i.Fragment,null,i.createElement("line",{x1:"40",y1:"128",x2:"216",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}),i.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"216",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"}))})),p.set("regular",(function(e){return i.createElement(i.Fragment,null,i.createElement("line",{x1:"40",y1:"128",x2:"216",y2:"128",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),i.createElement("line",{x1:"128",y1:"40",x2:"128",y2:"216",fill:"none",stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}))}));var x=function(e,n){return(0,d._)(e,n,p)},m=(0,i.forwardRef)((function(e,n){return i.createElement(h.Z,Object.assign({ref:n},e,{renderPath:x}))}));m.displayName="Plus";var f=m,g=t(4596),j=t(4165),Z=t(1413),v=t(5861),b=t(7205),k=t(1134),y=t(8007),C=t(4695),w=t(3309),I=t(184),W=["Name 1","Name 2","Name 3"],F=function(e){var n=e.onClose,t=y.Ry().shape({title:y.Z_().required("Title is required"),members:y.IX().min(2,"Must have at least 2 members")}),r=(0,k.cI)({resolver:(0,C.X)(t),defaultValues:{title:"",members:[]}}),i=r.reset,o=(r.watch,r.setError),a=r.handleSubmit,c=r.formState,l=(c.errors,c.isSubmitting,c.isSubmitSuccessful,c.isValid,function(){var e=(0,v.Z)((0,j.Z)().mark((function e(n){return(0,j.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log(n)}catch(t){console.log(t),i(),o("afterSubmit",(0,Z.Z)((0,Z.Z)({},t),{},{message:t.message}))}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());return(0,I.jsx)(w.ZP,{methods:r,onSubmit:a(l),children:(0,I.jsxs)(s.Z,{spacing:3,children:[(0,I.jsx)(w.au,{name:"title",label:"Title"}),(0,I.jsx)(w.Fl,{name:"members",label:"Members",multiple:!0,freeSolo:!0,options:W.map((function(e){return e})),ChipProps:{size:"medium"}}),(0,I.jsxs)(s.Z,{spacing:2,direction:"row",alignItems:"center",justifyContent:"end",children:[(0,I.jsx)(b.Z,{onClick:n,variant:"contained",children:"Cancel"}),(0,I.jsx)(b.Z,{type:"submit",variant:"contained",children:"Create"})]})]})})},S=function(){var e=(0,u.Z)(),n=(0,i.useState)(!1),t=(0,r.Z)(n,2),d=t[0],h=t[1],p=function(){h(!1)},x=(0,I.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,I.jsx)(a.Z,{variant:"subtitle2",component:c.Z,children:"Create New Group"}),(0,I.jsx)(l.Z,{onClick:function(){h(!0)},children:(0,I.jsx)(f,{style:{color:e.palette.primary.main}})})]});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(o.Z,{heading:"Groups",type:"All Groups",option:x,elementType:"Chat"}),(0,I.jsx)(g.Z,{open:d,onClose:p,dialogText:"Hello",dialogForm:(0,I.jsx)(F,{onClose:p}),fullWidth:!0,maxWidth:"xs"})]})}}}]);
//# sourceMappingURL=796.82ec19d3.chunk.js.map